_G.a = true -- toggle to start/stop

local TweenService = game:GetService("TweenService")
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local hrp = character:WaitForChild("HumanoidRootPart")

-- find nearest zombie
local function getClosestZombie()
	local closest, dist = nil, math.huge
	for _, obj in ipairs(workspace:GetChildren()) do
		if obj.Name == "Zombie" then
			local root = obj:FindFirstChild("HumanoidRootPart")
			if root then
				local d = (root.Position - hrp.Position).Magnitude
				if d < dist then
					dist = d
					closest = obj
				end
			end
		end
	end
	return closest
end

-- get position 4 studs behind zombie
local function getBehindCFrame(zombie)
	local root = zombie:FindFirstChild("HumanoidRootPart")
	if not root then return end
	local pos = root.Position - root.CFrame.LookVector * 6
	local lookAt = Vector3.new(root.Position.X, pos.Y, root.Position.Z)
	return CFrame.lookAt(pos, lookAt)
end

-- tween smoothly
local function tweenTo(targetCFrame)
	local tween = TweenService:Create(hrp, TweenInfo.new(2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {CFrame = targetCFrame})
	tween:Play()
	tween.Completed:Wait()
end

-- main logic
task.spawn(function()
	while _G.a do
		local zombie = getClosestZombie()
		if zombie then
			local cf = getBehindCFrame(zombie)
			if cf then
				tweenTo(cf)
				-- stay behind until gone
				while _G.a and zombie.Parent and zombie:FindFirstChild("HumanoidRootPart") do
					local behind = getBehindCFrame(zombie)
					if behind then
						hrp.CFrame = behind
					else
						break
					end
					task.wait()
				end
			end
		else
			task.wait(1) -- wait until next zombie appears
		end
		task.wait(0.2)
	end
end)
